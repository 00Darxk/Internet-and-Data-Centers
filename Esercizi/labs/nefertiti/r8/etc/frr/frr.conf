!
! FRRouting configuration file
!
!  README: 
!  - titolo delle (sotto)sezioni in maiuscolo
!  - valori di default tra parentesi tonde (default)
!  - valori da inserire tra parentesi graffe {valore}
!       - possono essere specificate opzioni {valore: opzione1, opzione2, opzione3}
!       - tra queste bisogna sceglierne solo una
!  - parametri/comandi opzionali tra parentesi quadre [opzionale] 
!       - se non ci sono si assume sia necessario
!  - evitare di lasciare commenti (!) sparsi tra le righe o dopo un comando,
!       - potrebbero impedire di leggere righe adiacenti
! 
! CONFIGURARE INTERFACCE:
!   interface {nome-interfaccia}
!   {protocollo: ospf} cost {costo: (10), {intero}}
!
! CONFIGURARE PROTOCOLLI DI INSTRADAMENTO:
!   router {protocollo: rip, ospf, bgp {as-id}}
!
!   PROTOCOLLI IGP: 
!       OSPF:
!           network {prefisso}/{netmask} area {area-id}
!           [area {area-id} {area-type: (backbone), stub} {option: no-summary}]
!           [default-information originate always]
!
!       RIP:
!           network {prefisso}/{netmask}
!           route   {prefisso}/{netmask}
!
!       redistribute {tabella: kernel, connected, bgp [route-map {nome-rmap}]} 
!   
!   PROTOCOLLI EGP:
!       OPZIONI DI DEBUG BGP:
!          [debug bgp keepalives]
!          [debug bgp updates in]
!          [debug bgp updates out]
!       OPZIONI ZEBRA:
!           [password zebra]
!           [enable password zebra]
!
!       BGP:
!           [no bgp network import-check]
!           [no bgp ebgp-requires-policy] 
!           neighbor  {indirizzo-peer} remote-as {as-di-peer}
!           [neighbor {indirizzo-peer} description {descrizione}]
!           [neighbor {indirizzo-peer} prefix-list {nome-lista} {tipo: in, out}]
!           [neighbor {indirizzo-peer} filter-list {nome-lista} {tipo: in, out}]
!           [neighbor {indirizzo-peer} [default-originate] route-map {nome-rmap} {tipo: in, out}]
!           [neighbor {indirizzo-peer} update-source {prefisso}/{netmask}]
!           [neighbor {indirizzo-peer} default-originate]
!
!           [access-list {nome-lista} [exact-match] permit {prefisso}/{netmask}]
!
!           [ip prefix-list {nome-lista} [seq {seq-num}] permit {(any), {prefisso}/{netmask}}]
!
!           network {prefisso}/{netmask}
!           [redistribute {tabella: connected}]
!
!           
!           [route-map {{nome-lista}, {nome-rmap}} {tipo: permit/deny} {seq-num}
!               [match ip address {indirizzo}]
!               [match ip access-list {nome-l}]
!               [match ip prefix-list {nome-l}]
!               [match ip next-hop {address {indirizzo}, prefix-list {nome-l}, access-list {nome-l}}]
!               [match ip origin {address {indirizzo}, prefix-list {nome-l}, access-list {nome-l}}]
!               [match as-path {path}]
!               [set {parametro: local-preference, metric, origin, next-hop} {valore}]
!           ]
!           
!           [bgp as-path access-list {nome-filter/access-list} {tipo: permit, deny} {regexp}]
!
!
!
! CONFIGURARE LOG: 
!   log file /var/log/frr/frr.log


router rip 
    network 97.0.0.0/24
    network 90.0.0.0/25
    redistribute connected
    redistribute bgp route-map eBGP

debug bgp keepalives
debug bgp updates in
debug bgp updates out

password zebra
enable password zebra

router bgp 2
    no bgp network import-check
    no bgp ebgp-requires-policy

    neighbor 87.0.0.2 remote-as 5
    neighbor 87.0.0.2 description AS5(r9)
    neighbor 2.2.2.2 remote-as 2
    neighbor 2.2.2.2 description AS2(r2)
    neighbor 2.2.2.2 update-source 7.7.7.7
    neighbor 4.4.4.4 remote-as 2
    neighbor 4.4.4.4 description AS2(r4)
    neighbor 4.4.4.4 update-source 7.7.7.7
    neighbor 9.9.9.9 remote-as 2
    neighbor 9.9.9.9 description AS2(r7)
    neighbor 9.9.9.9 update-source 7.7.7.7


    network 97.0.0.0/24
    network 90.0.0.0/25
    network 87.0.0.0/25

    ip prefix-list myNeighbors permit 87.0.0.0/25 le 32
    route-map eBGP permit 5
        match ip next-hop prefix-list myNeighbors

log file /var/log/frr/frr.log